{"version":3,"sources":["../src/config.ts","../src/utils.ts","../src/timing.ts","../src/winston.config.ts","../src/server.ts","../src/http.ts","../src/browser.ts","../src/formatters.ts","../src/index.ts"],"names":["parseLogLevel","value","defaultValue","normalized","VALID_LOG_LEVELS","parseBoolean","parseFileSize","sizeMatch","size","parseMaxFiles","durationMatch","amount","getConfig","cachedConfig","level","DEFAULT_CONFIG","isLoggingEnabled","shouldLog","config","priorities","getLogDir","isDevelopment","init_config","__esmMin","isBrowser","generateUUID","c","r","generateRequestId","createTimestamp","createUnixTimestamp","getPerformanceNow","init_utils","timing_exports","__export","DEFAULT_THRESHOLDS","MetricsAggregator","PerformanceLevel","Stopwatch","checkPerformance","createPerformanceTracker","createThrottledLogger","timing_default","formatDuration","noopPerformanceLogger","now","nowMicro","perf","time","timeAsync","seconds","nanoseconds","ms","fn","start","result","end","duration","thresholds","operationName","logger","defaultThresholds","operation","context","check","intervals","lastLogged","threshold","key","currentTime","last","init_timing","current","label","lapTime","existing","values","sorted","a","b","count","min","max","avg","percentile","p","idx","getConsoleTransport","winston","message","timestamp","getDailyRotateTransport","filename","logDir","DailyRotateFile","createTransports","transports","getWinstonConfig","init_winston_config","server_exports","ServerLoggerImpl","createServerLogger","server_default","options","init_server","_ServerLoggerImpl","child","http_exports","ApiLoggerBuilder","ApiLoggerImpl","DEFAULT_BODY_LOGGING_CONFIG","applyRedaction","createApiLogger","createBodyLoggingConfig","createFetchInterceptor","createLoggedFetch","http_default","getBodyType","isBinaryContentType","parseDuration","parseSize","redactBody","redactHeaders","timeApiCall","sizeStr","match","unit","multipliers","durationStr","contentType","pattern","matchContentType","normalizedPattern","isContentTypeAllowed","filter","shouldSample","url","sampling","body","visited","depth","maxDepth","item","redacted","normalizedKey","field","redactedValue","f","readBodyWithTimeout","response","timeout","maxSize","controller","timeoutId","truncated","text","error","parseResponseBodyForLog","contentLength","cloned","bodyResult","redactHeadersWithConfig","headers","h","redactBodyWithConfig","enabled","bodyConfig","input","init","requestId","startTime","requestContext","parsedBody","responseContext","log","init_http","initialConfig","patterns","replacement","fieldNames","fields","rate","codes","prefix","env","keys","k","s","finalConfig","COLORS","RESET","formatTimestamp","formatLevel","formatMessage","contextStr","formattedValue","formatForConsole","formattedTimestamp","formattedLevel","formattedMessage","formatBrowserLogEntry","STORAGE_KEY","MAX_ENTRIES","BrowserLoggerImpl","entry","formatted","stored","newEntry","parsed","instance","getInstance","createBrowserLogger","_serverLogger","loggedFetch","_createLoggedFetch","measure"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * MIT License\n *\n * Copyright (c) 2026 Zaob <zaob.ogn@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/**\n * Configuration module for API Logger Integration\n *\n * Loads and validates environment variables, provides defaults,\n * and exposes configuration as a readonly object.\n */\n\nimport type { LoggerConfig, LogLevel } from './types';\n\n/**\n * Default configuration values\n */\nconst DEFAULT_CONFIG: Omit<LoggerConfig, 'level'> = {\n  enabled: true,\n  redactSensitive: true,\n  includeStackTrace: true,\n  maxFileSize: 10 * 1024 * 1024, // 10MB\n  maxFiles: 14, // 14 days\n  logDir: './_logs',\n  jsonFormat: true,\n  developmentFormat: true,\n};\n\n/**\n * Valid log levels\n */\nconst VALID_LOG_LEVELS = ['debug', 'info', 'warn', 'error', 'fatal'] as const;\n\n/**\n * Parse log level from environment variable\n */\nfunction parseLogLevel(value: string | undefined, defaultValue: LogLevel): LogLevel {\n  if (!value) {\n    return defaultValue;\n  }\n  const normalized = value.toLowerCase();\n  if (VALID_LOG_LEVELS.includes(normalized as LogLevel)) {\n    return normalized as LogLevel;\n  }\n  console.warn(`Invalid log level \"${value}\", using default \"${defaultValue}\"`);\n  return defaultValue;\n}\n\n/**\n * Parse boolean from environment variable\n */\nfunction parseBoolean(value: string | undefined, defaultValue: boolean): boolean {\n  if (value === undefined) {\n    return defaultValue;\n  }\n  return value.toLowerCase() === 'true';\n}\n\n/**\n * Parse file size string (e.g., \"10m\", \"1g\") to bytes\n */\nfunction parseFileSize(value: string | undefined, defaultValue: number): number {\n  if (!value) {\n    return defaultValue;\n  }\n\n  const sizeMatch = value.toLowerCase().match(/^(\\d+)([bkmg])?$/);\n  if (!sizeMatch?.[1]) {\n    return defaultValue;\n  }\n\n  const size = parseInt(sizeMatch[1], 10);\n  const unit = sizeMatch[2] ?? undefined;\n\n  switch (unit) {\n    case 'g':\n      return size * 1024 * 1024 * 1024;\n    case 'm':\n      return size * 1024 * 1024;\n    case 'k':\n      return size * 1024;\n    default:\n      return size;\n  }\n}\n\n/**\n * Parse max files string (e.g., \"14d\", \"10\") to days\n */\nfunction parseMaxFiles(value: string | undefined, defaultValue: number): number {\n  if (!value) {\n    return defaultValue;\n  }\n\n  // Handle duration format like \"14d\" for 14 days\n  const durationMatch = value.toLowerCase().match(/^(\\d+)([dwh])?$/);\n  if (!durationMatch?.[1]) {\n    return defaultValue;\n  }\n\n  const amount = parseInt(durationMatch[1], 10);\n  const unit = durationMatch[2] ?? undefined;\n\n  switch (unit) {\n    case 'w':\n      return amount * 7; // weeks to days\n    case 'h':\n      return Math.ceil(amount / 24); // hours to days (rounded up)\n    case 'd':\n    default:\n      return amount;\n  }\n}\n\n/**\n * Cached configuration object\n */\nlet cachedConfig: LoggerConfig | null = null;\n\n/**\n * Get the logger configuration\n * Loads from environment variables with defaults, caches the result\n */\nexport function getConfig(): LoggerConfig {\n  if (cachedConfig) {\n    return cachedConfig;\n  }\n\n  const level = parseLogLevel(process.env['NEXT_PUBLIC_LOG_LEVEL'], 'debug');\n\n  cachedConfig = {\n    ...DEFAULT_CONFIG,\n    level,\n    enabled: parseBoolean(process.env['NEXT_PUBLIC_LOG_ENABLED'], DEFAULT_CONFIG.enabled),\n    redactSensitive: parseBoolean(\n      process.env['API_LOG_REDACT_SENSITIVE'],\n      DEFAULT_CONFIG.redactSensitive\n    ),\n    includeStackTrace: parseBoolean(undefined, DEFAULT_CONFIG.includeStackTrace),\n    maxFileSize: parseFileSize(process.env['LOG_MAX_SIZE'], DEFAULT_CONFIG.maxFileSize),\n    maxFiles: parseMaxFiles(process.env['LOG_MAX_FILES'], DEFAULT_CONFIG.maxFiles),\n    logDir: process.env['LOG_DIR'] || DEFAULT_CONFIG.logDir,\n    jsonFormat: parseBoolean(undefined, DEFAULT_CONFIG.jsonFormat),\n    developmentFormat: parseBoolean(undefined, DEFAULT_CONFIG.developmentFormat),\n  };\n\n  return cachedConfig;\n}\n\n/**\n * Check if logging is enabled\n */\nexport function isLoggingEnabled(): boolean {\n  return getConfig().enabled;\n}\n\n/**\n * Check if a log level will be output\n */\nexport function shouldLog(level: LogLevel): boolean {\n  if (!isLoggingEnabled()) {\n    return false;\n  }\n\n  const config = getConfig();\n  const priorities: Record<LogLevel, number> = {\n    debug: 0,\n    info: 1,\n    warn: 2,\n    error: 3,\n    fatal: 4,\n  };\n\n  return priorities[level] >= priorities[config.level];\n}\n\n/**\n * Get the log directory path\n */\nexport function getLogDir(): string {\n  return getConfig().logDir;\n}\n\n/**\n * Check if running in development mode\n */\nexport function isDevelopment(): boolean {\n  return process.env['NODE_ENV'] === 'development';\n}\n\n/**\n * Check if running in production mode\n */\nexport function isProduction(): boolean {\n  return process.env['NODE_ENV'] === 'production';\n}\n\n/**\n * Get the current environment\n */\nexport function getEnvironment(): string {\n  return process.env['NODE_ENV'] || 'development';\n}\n\n/**\n * Reset the cached configuration (useful for testing)\n */\nexport function resetConfig(): void {\n  cachedConfig = null;\n}\n","/**\n * MIT License\n *\n * Copyright (c) 2026 Zaob <zaob.ogn@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/**\n * Utility functions for API Logger Integration\n *\n * UUID generation, timestamp creation, and environment detection.\n */\n\n/**\n * Check if running in browser environment\n */\nexport function isBrowser(): boolean {\n  return typeof window !== 'undefined';\n}\n\n/**\n * Check if running in server environment\n */\nexport function isServer(): boolean {\n  return typeof window === 'undefined';\n}\n\n/**\n * Check if running in test environment\n */\nexport function isTest(): boolean {\n  return process.env['NODE_ENV'] === 'test';\n}\n\n/**\n * Generate a UUID v4 string\n * Uses crypto.randomUUID() if available, falls back to custom implementation\n */\nexport function generateUUID(): string {\n  // Use crypto.randomUUID() in Node.js 19+ and modern browsers\n  if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n    return crypto.randomUUID();\n  }\n\n  // Fallback implementation for older environments\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n/**\n * Generate a request ID (UUID v4)\n * Alias for generateUUID for semantic clarity\n */\nexport function generateRequestId(): string {\n  return generateUUID();\n}\n\n/**\n * Generate a unique ID with prefix\n */\nexport function generatePrefixedId(prefix: string): string {\n  return `${prefix}-${generateUUID()}`;\n}\n\n/**\n * Create a timestamp in ISO 8601 format\n */\nexport function createTimestamp(): string {\n  return new Date().toISOString();\n}\n\n/**\n * Create a Unix timestamp in milliseconds\n */\nexport function createUnixTimestamp(): number {\n  return Date.now();\n}\n\n/**\n * Parse ISO 8601 timestamp to Date object\n */\nexport function parseTimestamp(timestamp: string): Date {\n  return new Date(timestamp);\n}\n\n/**\n * Get current time in milliseconds for performance measurements\n */\nexport function getPerformanceNow(): number {\n  if (typeof performance !== 'undefined' && performance.now) {\n    return performance.now();\n  }\n  return Date.now();\n}\n\n/**\n * Debounce a function\n */\nexport function debounce<T extends (...args: unknown[]) => unknown>(\n  fn: T,\n  delay: number\n): (...args: Parameters<T>) => void {\n  let timeoutId: ReturnType<typeof setTimeout>;\n\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn(...args), delay);\n  };\n}\n\n/**\n * Throttle a function\n */\nexport function throttle<T extends (...args: unknown[]) => unknown>(\n  fn: T,\n  limit: number\n): (...args: Parameters<T>) => void {\n  let inThrottle = false;\n\n  return (...args: Parameters<T>) => {\n    if (!inThrottle) {\n      fn(...args);\n      inThrottle = true;\n      setTimeout(() => {\n        inThrottle = false;\n      }, limit);\n    }\n  };\n}\n\n/**\n * Safe JSON parse\n */\nexport function safeJsonParse<T>(json: string, fallback: T): T {\n  try {\n    return JSON.parse(json) as T;\n  } catch {\n    return fallback;\n  }\n}\n\n/**\n * Safe JSON stringify with fallback for circular references\n */\nexport function safeJsonStringify(obj: unknown): string {\n  try {\n    return JSON.stringify(obj);\n  } catch {\n    return '[Unable to stringify object]';\n  }\n}\n\n/**\n * Check if a value is a primitive (string, number, boolean, null, undefined)\n */\nexport function isPrimitive(value: unknown): boolean {\n  return value === null || (typeof value !== 'object' && typeof value !== 'function');\n}\n\n/**\n * Deep clone an object (simple implementation)\n */\nexport function deepClone<T>(obj: T): T {\n  if (isPrimitive(obj)) {\n    return obj;\n  }\n  return JSON.parse(JSON.stringify(obj)) as T;\n}\n\n/**\n * Merge objects deeply\n */\nexport function deepMerge<T extends Record<string, unknown>, U extends Record<string, unknown>>(\n  target: T,\n  source: U\n): T & U {\n  const output = { ...target } as T & U;\n\n  if (isObject(target) && isObject(source)) {\n    for (const key of Object.keys(source)) {\n      const sourceValue = source[key];\n      const targetValue = target[key];\n\n      if (isObject(sourceValue) && isObject(targetValue)) {\n        (output as Record<string, unknown>)[key] = deepMerge(\n          targetValue as Record<string, unknown>,\n          sourceValue as Record<string, unknown>\n        );\n      } else {\n        (output as Record<string, unknown>)[key] = sourceValue;\n      }\n    }\n  }\n\n  return output;\n}\n\n/**\n * Check if a value is an object (non-null, not a function)\n */\nfunction isObject(value: unknown): value is Record<string, unknown> {\n  return value !== null && typeof value === 'object' && !Array.isArray(value);\n}\n\n/**\n * Get a nested value from an object using dot notation\n */\nexport function getNestedValue<T>(obj: Record<string, unknown>, path: string, defaultValue: T): T {\n  const keys = path.split('.');\n  let current: unknown = obj;\n\n  for (const key of keys) {\n    if (current === null || current === undefined) {\n      return defaultValue;\n    }\n\n    if (typeof current === 'object') {\n      current = (current as Record<string, unknown>)[key];\n    } else {\n      return defaultValue;\n    }\n  }\n\n  return (current as T) ?? defaultValue;\n}\n\n/**\n * Set a nested value in an object using dot notation\n */\nexport function setNestedValue(obj: Record<string, unknown>, path: string, value: unknown): void {\n  const keys = path.split('.');\n  let current: Record<string, unknown> = obj;\n\n  for (let i = 0; i < keys.length - 1; i++) {\n    const key = keys[i] ?? '';\n\n    if (!(key in current) || !isObject(current[key])) {\n      current[key] = {};\n    }\n\n    current = current[key] as Record<string, unknown>;\n  }\n\n  const lastKey = keys[keys.length - 1] ?? '';\n  current[lastKey] = value;\n}\n","/**\n * MIT License\n *\n * Copyright (c) 2026 Zaob <zaob.ogn@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/**\n * Performance Timing Module\n *\n * Feature: 011-api-logger\n * User Story 5: Performance Timing\n *\n * Provides:\n * - High-resolution timing utilities\n * - API call duration tracking\n * - Slow operation detection\n * - Performance benchmarks\n */\n\nimport type { LogContext } from './types';\n\n/**\n * Get current high-resolution time in milliseconds\n */\nexport function now(): number {\n  // Use performance.now() if available, otherwise fallback to Date\n  // In Jest/node environment, we use a counter to ensure non-zero values\n  if (typeof performance !== 'undefined' && performance.now && performance.now() > 0) {\n    return performance.now();\n  }\n  // Fallback to Date with microsecond precision using process.hrtime if available\n  if (typeof process !== 'undefined' && process.hrtime) {\n    const [seconds, nanoseconds] = process.hrtime();\n    return seconds * 1000 + nanoseconds / 1000000;\n  }\n  // Final fallback to Date\n  return Date.now();\n}\n\n/**\n * Get current high-resolution time in microseconds\n */\nexport function nowMicro(): number {\n  return now() * 1000;\n}\n\n/**\n * Format duration in human-readable format\n */\nexport function formatDuration(ms: number): string {\n  if (ms < 1) {\n    return `${(ms * 1000).toFixed(2)}s`;\n  }\n  if (ms < 1000) {\n    return `${ms.toFixed(2)}ms`;\n  }\n  if (ms < 60000) {\n    return `${(ms / 1000).toFixed(2)}s`;\n  }\n  return `${(ms / 60000).toFixed(2)}m`;\n}\n\n/**\n * Timing result interface\n */\nexport interface TimingResult {\n  /** Duration in milliseconds */\n  duration: number;\n  /** Formatted duration string */\n  formatted: string;\n  /** Start timestamp */\n  start: number;\n  /** End timestamp */\n  end: number;\n}\n\n/**\n * Measure execution time of a synchronous function\n */\nexport function time<T>(fn: () => T): TimingResult & { result: T } {\n  const start = now();\n  const result = fn();\n  const end = now();\n  const duration = Math.max(end - start, 0.01); // Ensure minimum duration for accurate measurement\n\n  return {\n    result,\n    duration,\n    formatted: formatDuration(duration),\n    start,\n    end,\n  };\n}\n\n/**\n * Measure execution time of an async function\n */\nexport async function timeAsync<T>(fn: () => Promise<T>): Promise<TimingResult & { result: T }> {\n  const start = now();\n  const result = await fn();\n  const end = now();\n  const duration = Math.max(end - start, 0.01);\n\n  return {\n    result,\n    duration,\n    formatted: formatDuration(duration),\n    start,\n    end,\n  };\n}\n\n/**\n * Stopwatch for manual timing control\n */\nexport class Stopwatch {\n  private startTime: number;\n  private laps: Map<string, number> = new Map();\n  private cumulativeTime = 0;\n  private running = true;\n\n  constructor() {\n    this.startTime = now();\n  }\n\n  /**\n   * Get elapsed time since stopwatch was created\n   */\n  elapsed(): number {\n    const current = now();\n    if (this.running) {\n      return Math.max(current - this.startTime, 0);\n    }\n    return this.cumulativeTime;\n  }\n\n  /**\n   * Get formatted elapsed time\n   */\n  formattedElapsed(): string {\n    return formatDuration(this.elapsed());\n  }\n\n  /**\n   * Record a lap time with a label\n   */\n  lap(label: string): number {\n    const lapTime = this.elapsed();\n    this.laps.set(label, lapTime);\n    return lapTime;\n  }\n\n  /**\n   * Get all recorded lap times\n   */\n  getLaps(): Map<string, number> {\n    return new Map(this.laps);\n  }\n\n  /**\n   * Get a specific lap time\n   */\n  getLap(label: string): number | undefined {\n    return this.laps.get(label);\n  }\n\n  /**\n   * Reset the stopwatch\n   */\n  reset(): void {\n    this.startTime = now();\n    this.laps.clear();\n    this.cumulativeTime = 0;\n    this.running = true;\n  }\n\n  /**\n   * Stop the stopwatch\n   */\n  stop(): number {\n    this.cumulativeTime = this.elapsed();\n    this.running = false;\n    return this.cumulativeTime;\n  }\n\n  /**\n   * Restart the stopwatch\n   */\n  restart(): Stopwatch {\n    this.reset();\n    return this;\n  }\n\n  /**\n   * Create a checkpoint that returns elapsed time\n   */\n  checkpoint(): number {\n    return this.elapsed();\n  }\n}\n\n/**\n * Performance threshold configuration\n */\nexport interface PerformanceThreshold {\n  /** Warning threshold in milliseconds */\n  warning: number;\n  /** Critical threshold in milliseconds */\n  critical: number;\n}\n\n/**\n * Default performance thresholds for different operation types\n */\nexport const DEFAULT_THRESHOLDS: Record<string, PerformanceThreshold> = {\n  api: { warning: 200, critical: 1000 },\n  db: { warning: 100, critical: 500 },\n  cache: { warning: 10, critical: 50 },\n  render: { warning: 16, critical: 100 }, // 16ms = 1 frame at 60fps\n  file: { warning: 50, critical: 200 },\n  external: { warning: 500, critical: 3000 },\n};\n\n/**\n * Performance level enumeration\n */\nexport enum PerformanceLevel {\n  OK = 'ok',\n  WARNING = 'warning',\n  CRITICAL = 'critical',\n}\n\n/**\n * Performance check result\n */\nexport interface PerformanceCheck {\n  /** Performance level */\n  level: PerformanceLevel;\n  /** Duration in milliseconds */\n  duration: number;\n  /** Formatted duration */\n  formatted: string;\n  /** Threshold that was exceeded (if any) */\n  threshold?: 'warning' | 'critical';\n  /** Message describing the performance status */\n  message: string;\n}\n\n/**\n * Check if a duration exceeds performance thresholds\n */\nexport function checkPerformance(\n  duration: number,\n  thresholds: PerformanceThreshold = DEFAULT_THRESHOLDS.api,\n  operationName = 'operation'\n): PerformanceCheck {\n  if (duration >= thresholds.critical) {\n    return {\n      level: PerformanceLevel.CRITICAL,\n      duration,\n      formatted: formatDuration(duration),\n      threshold: 'critical',\n      message: `${operationName} took too long (${formatDuration(duration)}, critical threshold: ${formatDuration(thresholds.critical)})`,\n    };\n  }\n\n  if (duration >= thresholds.warning) {\n    return {\n      level: PerformanceLevel.WARNING,\n      duration,\n      formatted: formatDuration(duration),\n      threshold: 'warning',\n      message: `${operationName} is slow (${formatDuration(duration)}, warning threshold: ${formatDuration(thresholds.warning)})`,\n    };\n  }\n\n  return {\n    level: PerformanceLevel.OK,\n    duration,\n    formatted: formatDuration(duration),\n    message: `${operationName} completed in ${formatDuration(duration)}`,\n  };\n}\n\n/**\n * Performance logger interface\n */\nexport interface IPerformanceLogger {\n  logOperation: (operation: string, duration: number, context?: LogContext) => void;\n  logSlowOperation: (\n    operation: string,\n    duration: number,\n    threshold: 'warning' | 'critical',\n    context?: LogContext\n  ) => void;\n}\n\n/**\n * No-op performance logger for production use when logging is disabled\n */\nexport const noopPerformanceLogger: IPerformanceLogger = {\n  logOperation: () => {},\n  logSlowOperation: () => {},\n};\n\n/**\n * Create a performance tracker with logging\n */\nexport function createPerformanceTracker(\n  logger: IPerformanceLogger,\n  defaultThresholds: PerformanceThreshold = DEFAULT_THRESHOLDS.api\n) {\n  return {\n    /**\n     * Track a synchronous operation\n     */\n    track<T>(operation: string, fn: () => T, context?: LogContext): TimingResult & { result: T } {\n      const start = now();\n      const result = fn();\n      const end = now();\n      const duration = Math.max(end - start, 0.01);\n\n      const check = checkPerformance(duration, defaultThresholds, operation);\n\n      if (check.level === PerformanceLevel.OK) {\n        logger.logOperation(operation, duration, context);\n      } else {\n        logger.logSlowOperation(operation, duration, check.threshold!, context);\n      }\n\n      return {\n        result,\n        duration,\n        formatted: formatDuration(duration),\n        start,\n        end,\n      };\n    },\n\n    /**\n     * Track an async operation\n     */\n    async trackAsync<T>(\n      operation: string,\n      fn: () => Promise<T>,\n      context?: LogContext\n    ): Promise<TimingResult & { result: T }> {\n      const start = now();\n      const result = await fn();\n      const end = now();\n      const duration = Math.max(end - start, 0.01);\n\n      const check = checkPerformance(duration, defaultThresholds, operation);\n\n      if (check.level === PerformanceLevel.OK) {\n        logger.logOperation(operation, duration, context);\n      } else {\n        logger.logSlowOperation(operation, duration, check.threshold!, context);\n      }\n\n      return {\n        result,\n        duration,\n        formatted: formatDuration(duration),\n        start,\n        end,\n      };\n    },\n\n    /**\n     * Create a stopwatch for manual timing\n     */\n    startTimer(): Stopwatch {\n      return new Stopwatch();\n    },\n\n    /**\n     * Check performance against thresholds\n     */\n    check(operation: string, duration: number): PerformanceCheck {\n      return checkPerformance(duration, defaultThresholds, operation);\n    },\n  };\n}\n\n/**\n * Throttled performance logger - only logs slow operations\n */\nexport function createThrottledLogger(\n  logger: IPerformanceLogger,\n  intervals: Record<'warning' | 'critical', number> = {\n    warning: 60000, // Log warning every minute\n    critical: 0, // Always log critical\n  }\n) {\n  const lastLogged: Map<string, number> = new Map();\n\n  return {\n    logOperation: (operation: string, duration: number, context?: LogContext) => {\n      logger.logOperation(operation, duration, context);\n    },\n    logSlowOperation: (\n      operation: string,\n      duration: number,\n      threshold: 'warning' | 'critical',\n      context?: LogContext\n    ) => {\n      const key = `${operation}:${threshold}`;\n      const currentTime = Date.now();\n      const last = lastLogged.get(key) ?? 0;\n\n      if (threshold === 'critical' || currentTime - last >= intervals[threshold]) {\n        logger.logSlowOperation(operation, duration, threshold, context);\n        lastLogged.set(key, currentTime);\n      }\n    },\n  };\n}\n\n/**\n * Performance metrics aggregator\n */\nexport class MetricsAggregator {\n  private metrics: Map<string, number[]> = new Map();\n\n  /**\n   * Record a timing value\n   */\n  record(key: string, value: number): void {\n    const existing = this.metrics.get(key) ?? [];\n    existing.push(value);\n    this.metrics.set(key, existing);\n  }\n\n  /**\n   * Get statistics for a metric\n   */\n  getStats(key: string): {\n    count: number;\n    min: number;\n    max: number;\n    avg: number;\n    p50: number;\n    p95: number;\n    p99: number;\n  } | null {\n    const values = this.metrics.get(key);\n    if (!values || values.length === 0) {\n      return null;\n    }\n\n    const sorted = [...values].sort((a, b) => a - b);\n    const count = sorted.length;\n    const min = sorted[0];\n    const max = sorted[count - 1];\n    const avg = sorted.reduce((a, b) => a + b, 0) / count;\n\n    const percentile = (p: number) => {\n      const idx = Math.floor(count * p);\n      return sorted[Math.min(idx, count - 1)];\n    };\n\n    return {\n      count,\n      min,\n      max,\n      avg,\n      p50: percentile(0.5),\n      p95: percentile(0.95),\n      p99: percentile(0.99),\n    };\n  }\n\n  /**\n   * Get all metric names\n   */\n  getMetricNames(): string[] {\n    return Array.from(this.metrics.keys());\n  }\n\n  /**\n   * Clear all metrics\n   */\n  clear(): void {\n    this.metrics.clear();\n  }\n}\n\n/**\n * Default export with all performance utilities\n */\nexport const perf = {\n  now,\n  nowMicro,\n  formatDuration,\n  time,\n  timeAsync,\n  Stopwatch,\n  DEFAULT_THRESHOLDS,\n  PerformanceLevel,\n  checkPerformance,\n  createPerformanceTracker,\n  createThrottledLogger,\n  MetricsAggregator,\n};\n\nexport default perf;\n","/**\n * MIT License\n *\n * Copyright (c) 2026 Zaob <zaob.ogn@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/**\n * Winston configuration for API Logger Integration\n *\n * Feature: 011-api-logger\n * User Story 2: Server-Side Winston File Logging\n *\n * Configures Winston transports for:\n * - Daily rotating file logs\n * - Console output (colored in dev, JSON in prod)\n * - Separate transports for combined, API, error, exceptions, rejections\n */\n\nimport winston from 'winston';\nimport DailyRotateFile from 'winston-daily-rotate-file';\nimport type { LoggerConfig } from './types';\nimport { getConfig, getLogDir, isDevelopment } from './config';\n\n/**\n * Get console transport configuration\n */\nexport function getConsoleTransport() {\n  return new winston.transports.Console({\n    format: winston.format.combine(\n      winston.format.colorize(),\n      winston.format.printf(({ level, message, timestamp }) => {\n        const config = getConfig();\n\n        if (isDevelopment() && config.developmentFormat) {\n          return `${timestamp} [${level}] ${message}`;\n        }\n\n        return JSON.stringify({\n          '@timestamp': timestamp,\n          level: level.toUpperCase(),\n          message,\n        });\n      })\n    ),\n  });\n}\n\n/**\n * Get daily rotate file transport configuration\n */\nexport function getDailyRotateTransport(filename: string, level: string) {\n  const logDir = getLogDir();\n  const config = getConfig();\n\n  return new DailyRotateFile({\n    dirname: logDir,\n    filename: `${filename}.%DATE%.log`,\n    datePattern: 'YYYY-MM-DD',\n    maxSize: config.maxFileSize,\n    maxFiles: config.maxFiles,\n    level,\n    format: winston.format.json(),\n  });\n}\n\n/**\n * Create all Winston transports\n */\nexport function createTransports() {\n  const config = getConfig();\n  const transports: winston.transport[] = [];\n\n  transports.push(getConsoleTransport());\n\n  transports.push(getDailyRotateTransport('combined', 'debug'));\n  transports.push(getDailyRotateTransport('api', 'info'));\n  transports.push(getDailyRotateTransport('error', 'error'));\n\n  return transports;\n}\n\n/**\n * Get Winston logger configuration object\n */\nexport function getWinstonConfig(): winston.LoggerOptions {\n  const config = getConfig();\n\n  return {\n    level: config.level,\n    transports: createTransports(),\n    exitOnError: false,\n    handleExceptions: true,\n    handleRejections: true,\n    silent: false,\n  };\n}\n","/**\n * MIT License\n *\n * Copyright (c) 2026 Zaob <zaob.ogn@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/**\n * Server-side Winston logger implementation\n *\n * Feature: 011-api-logger\n * User Story 2: Server-Side Winston File Logging\n *\n * This module provides:\n * - IServerLogger interface implementation using Winston\n * - Child logger support for persistent context\n * - Console output (colored in dev, JSON in prod)\n * - File output with daily rotation\n */\n\nimport winston from 'winston';\n\nimport { shouldLog, getConfig, isDevelopment } from './config';\nimport type { IServerLogger, LogContext, LogLevel } from './types';\nimport { getWinstonConfig } from './winston.config';\n\n/**\n * Add context to log entry\n */\nfunction addContext(entry: Record<string, unknown>, context?: LogContext): void {\n  if (context && Object.keys(context).length > 0) {\n    Object.assign(entry, context);\n  }\n}\n\n/**\n * Server logger implementation\n */\nclass ServerLoggerImpl implements IServerLogger {\n  private winston: winston.Logger;\n  private context: Record<string, unknown> = {};\n  private loggerName: string;\n\n  constructor(options?: { name?: string; level?: LogLevel }) {\n    const config = getConfig();\n    this.loggerName = options?.name || 'server-logger';\n\n    this.winston = winston.createLogger({\n      ...getWinstonConfig(),\n      level: options?.level ?? config.level,\n      defaultMeta: () => this.context,\n    });\n  }\n\n  debug(message: string, context?: LogContext): void {\n    this.winston.debug(message, this.formatContext(context));\n  }\n\n  info(message: string, context?: LogContext): void {\n    this.winston.info(message, this.formatContext(context));\n  }\n\n  warn(message: string, context?: LogContext): void {\n    this.winston.warn(message, this.formatContext(context));\n  }\n\n  error(message: string, context?: LogContext): void {\n    this.winston.error(message, this.formatContext(context));\n  }\n\n  fatal(message: string, context?: LogContext): void {\n    // Winston doesn't have fatal, use error instead\n    this.winston.error(message, this.formatContext(context));\n  }\n\n  child(context: LogContext): IServerLogger {\n    const child = new ServerLoggerImpl({\n      name: this.loggerName,\n    });\n\n    child.context = { ...this.context, ...context };\n\n    return child;\n  }\n\n  with(context: LogContext): IServerLogger {\n    const child = new ServerLoggerImpl({\n      name: this.loggerName,\n    });\n\n    child.context = { ...this.context, ...context };\n\n    return child;\n  }\n\n  private formatContext(context?: LogContext): Record<string, unknown> | undefined {\n    if (!context || Object.keys(context).length === 0) {\n      return undefined;\n    }\n\n    return context;\n  }\n\n  static flush(): void {\n    // Winston loggers container doesn't have forEach, skip flush for now\n    // The loggers will flush automatically when the process exits\n  }\n}\n\n/**\n * Create server logger instance\n */\nfunction createServerLogger(options?: { name?: string; level?: LogLevel }): IServerLogger {\n  return new ServerLoggerImpl(options);\n}\n\n/**\n * Export server logger\n */\nexport default createServerLogger;\nexport { createServerLogger, ServerLoggerImpl };\n","/**\n * MIT License\n *\n * Copyright (c) 2026 Zaob <zaob.ogn@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/**\n * API Logger for automatic request/response logging\n *\n * Feature: 011-api-logger\n * User Story 3: Automatic API Request/Response Logging\n *\n * Provides:\n * - Request ID generation\n * - Automatic request/response logging\n * - createLoggedFetch() wrapper\n * - Fetch interceptors\n * - timeApiCall() utility\n * - BodyLoggingConfig with builder pattern\n */\n\nimport { createServerLogger, ServerLoggerImpl } from './server';\nimport type {\n  IApiLogger,\n  ApiRequestContext,\n  ApiResponseContext,\n  LogContext,\n  InterceptorFunction,\n  IServerLogger,\n  BodyLoggingConfig,\n  ContentTypeFilter,\n  RedactionPattern,\n  SamplingConfig,\n  LoggedFetchOptions,\n} from './types';\nimport { generateRequestId, createTimestamp, getPerformanceNow } from './utils';\n\n// ============================================================================\n// Default Body Logging Configuration\n// ============================================================================\n\n/**\n * Default configuration for body logging\n * Sensible defaults: enable logging, 10KB limit, skip binary, redact sensitive\n */\nconst DEFAULT_BODY_LOGGING_CONFIG: BodyLoggingConfig = {\n  enabled: true,\n  maxSize: 10 * 1024, // 10KB\n  readTimeout: 5000,\n  maxDepth: 10,\n  contentTypeFilter: {\n    exclude: [\n      'image/*',\n      'audio/*',\n      'video/*',\n      'application/pdf',\n      'application/zip',\n      'application/octet-stream',\n      'font/*',\n      'multipart/form-data',\n    ],\n  },\n  redactionPatterns: [\n    {\n      pattern: /\\b\\d{3}[-.\\s]?\\d{2}[-.\\s]?\\d{4}\\b/g,\n      replacement: '[REDACTED-SSN]',\n      fieldNames: ['ssn', 'socialsecuritynumber', 'taxid'],\n    },\n    {\n      pattern: /\\b\\d{4}[-\\s]?\\d{4}[-\\s]?\\d{4}[-\\s]?\\d{4}\\b/g,\n      replacement: '[REDACTED-CARD]',\n      fieldNames: ['creditcard', 'cardnumber', 'ccnumber'],\n    },\n    {\n      pattern: /Bearer\\s+[A-Za-z0-9\\-._~+/]+=*/gi,\n      replacement: 'Bearer [REDACTED]',\n      fieldNames: ['authorization'],\n    },\n  ],\n  sensitiveFields: [\n    'password',\n    'token',\n    'secret',\n    'apikey',\n    'accesstoken',\n    'refreshtoken',\n    'privatekey',\n    'ssn',\n    'creditcard',\n    'cardnumber',\n    'cvv',\n    'cvc',\n  ],\n  sensitiveHeaders: [\n    'authorization',\n    'cookie',\n    'set-cookie',\n    'x-api-key',\n    'x-auth-token',\n    'x-forwarded-for',\n  ],\n  skipStatusCodes: [204, 304],\n  verbose: false,\n};\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\n/**\n * Parse size string (e.g., \"10kb\", \"1mb\") to bytes\n */\nexport function parseSize(sizeStr: string): number {\n  const match = sizeStr.toLowerCase().match(/^(\\d+(?:\\.\\d+)?)\\s*(b|kb|mb|gb)?$/);\n  if (!match) {\n    return DEFAULT_BODY_LOGGING_CONFIG.maxSize;\n  }\n\n  const value = parseFloat(match[1]!);\n  const unit = match[2] || 'b';\n\n  const multipliers: Record<string, number> = { b: 1, kb: 1024, mb: 1024 ** 2, gb: 1024 ** 3 };\n  return Math.floor(value * (multipliers[unit] ?? 1));\n}\n\n/**\n * Parse duration string (e.g., \"5s\", \"5000ms\") to milliseconds\n */\nexport function parseDuration(durationStr: string): number {\n  const match = durationStr.toLowerCase().match(/^(\\d+(?:\\.\\d+)?)\\s*(ms|s|m)?$/);\n  if (!match) {\n    return DEFAULT_BODY_LOGGING_CONFIG.readTimeout;\n  }\n\n  const value = parseFloat(match[1]!);\n  const unit = match[2] || 'ms';\n\n  const multipliers: Record<string, number> = { ms: 1, s: 1000, m: 60 * 1000 };\n  return Math.floor(value * (multipliers[unit] ?? 1));\n}\n\n// ============================================================================\n// Builder Pattern for Body Logging Configuration\n// ============================================================================\n\n/**\n * Builder class for BodyLoggingConfig with fluent API\n */\nexport class ApiLoggerBuilder {\n  private config: Partial<BodyLoggingConfig> = {};\n\n  /**\n   * Create a new builder instance\n   */\n  constructor(initialConfig?: Partial<BodyLoggingConfig>) {\n    this.config = { ...initialConfig };\n  }\n\n  /**\n   * Enable or disable body logging\n   */\n  enabled(enabled: boolean): this {\n    this.config.enabled = enabled;\n    return this;\n  }\n\n  /**\n   * Set maximum body size (accepts bytes or string like \"10kb\", \"1mb\")\n   */\n  maxSize(size: number | string): this {\n    this.config.maxSize = typeof size === 'string' ? parseSize(size) : size;\n    return this;\n  }\n\n  /**\n   * Set read timeout (accepts ms or string like \"5s\", \"5000ms\")\n   */\n  readTimeout(timeout: number | string): this {\n    this.config.readTimeout = typeof timeout === 'string' ? parseDuration(timeout) : timeout;\n    return this;\n  }\n\n  /**\n   * Add content type patterns to exclude\n   */\n  excludeContentTypes(...patterns: string[]): this {\n    if (!this.config.contentTypeFilter) {\n      this.config.contentTypeFilter = {};\n    }\n    this.config.contentTypeFilter.exclude = [\n      ...(this.config.contentTypeFilter.exclude ?? []),\n      ...patterns,\n    ];\n    return this;\n  }\n\n  /**\n   * Add content type patterns to include\n   */\n  includeContentTypes(...patterns: string[]): this {\n    if (!this.config.contentTypeFilter) {\n      this.config.contentTypeFilter = {};\n    }\n    this.config.contentTypeFilter.include = [\n      ...(this.config.contentTypeFilter.include ?? []),\n      ...patterns,\n    ];\n    return this;\n  }\n\n  /**\n   * Add a custom redaction pattern\n   */\n  addRedactionPattern(pattern: RegExp, replacement: string, fieldNames?: string[]): this {\n    if (!this.config.redactionPatterns) {\n      this.config.redactionPatterns = [];\n    }\n    this.config.redactionPatterns.push({ pattern, replacement, fieldNames });\n    return this;\n  }\n\n  /**\n   * Add sensitive field names to redact\n   */\n  addSensitiveFields(...fields: string[]): this {\n    if (!this.config.sensitiveFields) {\n      this.config.sensitiveFields = [];\n    }\n    this.config.sensitiveFields.push(...fields.map(f => f.toLowerCase()));\n    return this;\n  }\n\n  /**\n   * Add sensitive header names to redact\n   */\n  addSensitiveHeaders(...headers: string[]): this {\n    if (!this.config.sensitiveHeaders) {\n      this.config.sensitiveHeaders = [];\n    }\n    this.config.sensitiveHeaders.push(...headers.map(h => h.toLowerCase()));\n    return this;\n  }\n\n  /**\n   * Configure sampling for high-traffic endpoints\n   */\n  sampling(rate: number, patterns?: string[]): this {\n    if (rate < 0 || rate > 1) {\n      throw new Error('Sampling rate must be between 0 and 1');\n    }\n    this.config.sampling = { rate, patterns };\n    return this;\n  }\n\n  /**\n   * Add status codes to skip body logging\n   */\n  skipStatusCodes(...codes: number[]): this {\n    if (!this.config.skipStatusCodes) {\n      this.config.skipStatusCodes = [];\n    }\n    this.config.skipStatusCodes.push(...codes);\n    return this;\n  }\n\n  /**\n   * Enable or disable verbose logging\n   */\n  verbose(enabled: boolean): this {\n    this.config.verbose = enabled;\n    return this;\n  }\n\n  /**\n   * Set maximum nesting depth for response body logging\n   * Prevents stack overflow from deeply nested objects\n   *\n   * @param depth - Maximum depth (1-100, default: 10)\n   */\n  maxDepth(depth: number): this {\n    this.config.maxDepth = depth;\n    return this;\n  }\n\n  // ============================================================================\n  // Preset Configurations\n  // ============================================================================\n\n  /**\n   * Basic preset - just works with sensible defaults for most use cases.\n   *\n   * Includes:\n   * - Body logging enabled\n   * - 10KB max size, 5s timeout\n   * - Binary content types excluded\n   * - Common sensitive fields redacted\n   * - Verbose in development\n   *\n   * @example\n   * ```typescript\n   * const config = new ApiLoggerBuilder().basic().build();\n   * ```\n   */\n  basic(): this {\n    return this.enabled(true)\n      .maxSize('10kb')\n      .readTimeout('5s')\n      .excludeContentTypes('image/*', 'video/*', 'application/pdf', 'font/*', 'multipart/form-data')\n      .addSensitiveFields('password', 'token', 'secret')\n      .skipStatusCodes(204, 304)\n      .verbose(process.env.NODE_ENV === 'development' || process.env.NODE_ENV === undefined);\n  }\n\n  /**\n   * Production preset - security and performance optimized for production use.\n   *\n   * Includes:\n   * - Smaller 5KB max size for reduced overhead\n   * - 3s timeout for faster failure detection\n   * - Comprehensive redaction patterns (SSN, credit cards, Bearer tokens)\n   * - Extended sensitive fields and headers redacted\n   * - Never verbose in production\n   * - Shallower 5-level depth for performance\n   *\n   * @example\n   * ```typescript\n   * const config = new ApiLoggerBuilder().production().build();\n   * ```\n   */\n  production(): this {\n    return this.enabled(true)\n      .maxSize('5kb')\n      .readTimeout('3s')\n      .excludeContentTypes(\n        'image/*',\n        'video/*',\n        'application/pdf',\n        'application/zip',\n        'font/*',\n        'multipart/form-data'\n      )\n      .addRedactionPattern(/\\b\\d{3}[-.\\s]?\\d{2}[-.\\s]?\\d{4}\\b/g, '[REDACTED-SSN]', [\n        'ssn',\n        'socialsecuritynumber',\n        'taxid',\n      ])\n      .addRedactionPattern(/\\b\\d{4}[-\\s]?\\d{4}[-\\s]?\\d{4}[-\\s]?\\d{4}\\b/g, '[REDACTED-CARD]', [\n        'creditcard',\n        'cardnumber',\n        'ccnumber',\n      ])\n      .addRedactionPattern(/Bearer\\s+[A-Za-z0-9\\-._~+/]+=*/gi, 'Bearer [REDACTED]', [\n        'authorization',\n      ])\n      .addSensitiveFields(\n        'password',\n        'token',\n        'secret',\n        'apikey',\n        'accesstoken',\n        'refreshtoken',\n        'privatekey',\n        'ssn',\n        'creditcard',\n        'cardnumber',\n        'cvv',\n        'cvc'\n      )\n      .addSensitiveHeaders(\n        'authorization',\n        'cookie',\n        'set-cookie',\n        'x-api-key',\n        'x-auth-token',\n        'x-forwarded-for'\n      )\n      .skipStatusCodes(204, 304)\n      .verbose(false)\n      .maxDepth(5);\n  }\n\n  /**\n   * Development preset - verbose logging for debugging and development.\n   *\n   * Includes:\n   * - Larger 50KB max size for comprehensive debugging\n   * - 10s timeout for slower development environments\n   * - Fewer content exclusions for full visibility\n   * - Basic sensitive field redaction\n   * - Always verbose in development\n   * - Deeper 20-level depth for complex object debugging\n   *\n   * @example\n   * ```typescript\n   * const config = new ApiLoggerBuilder().development().build();\n   * ```\n   */\n  development(): this {\n    return this.enabled(true)\n      .maxSize('50kb')\n      .readTimeout('10s')\n      .excludeContentTypes('image/*', 'video/*', 'application/pdf')\n      .addSensitiveFields('password', 'token', 'secret')\n      .skipStatusCodes(204, 304)\n      .verbose(true)\n      .maxDepth(20);\n  }\n\n  /**\n   * Minimal preset - maximum performance with minimal logging overhead.\n   *\n   * Includes:\n   * - Body logging disabled (only metadata logged)\n   * - Very small 1KB limit\n   * - 1s timeout for fast failure detection\n   * - Extensive content exclusions\n   * - Skips all success status codes\n   * - Never verbose\n   * - Shallow 3-level depth\n   *\n   * @example\n   * ```typescript\n   * const config = new ApiLoggerBuilder().minimal().build();\n   * ```\n   */\n  minimal(): this {\n    return this.enabled(false)\n      .maxSize('1kb')\n      .readTimeout('1s')\n      .excludeContentTypes(\n        'image/*',\n        'video/*',\n        'application/pdf',\n        'application/zip',\n        'font/*',\n        'multipart/form-data',\n        'application/octet-stream'\n      )\n      .addSensitiveFields('password', 'token', 'secret')\n      .skipStatusCodes(200, 201, 202, 204, 304)\n      .verbose(false)\n      .maxDepth(3);\n  }\n\n  /**\n   * Load configuration from environment variables\n   */\n  fromEnv(prefix = 'LOG_BODY'): this {\n    const env = process.env as Record<string, string | undefined>;\n\n    const keys = Object.keys(env).filter(k => k.startsWith(`${prefix}_`));\n\n    for (const key of keys) {\n      const value = env[key];\n      if (!value) continue;\n\n      const setting = key.slice(`${prefix}_`.length).toLowerCase();\n\n      switch (setting) {\n        case 'enabled':\n          this.config.enabled = value === 'true' || value === '1';\n          break;\n        case 'max_size':\n          this.config.maxSize = parseSize(value);\n          break;\n        case 'read_timeout':\n          this.config.readTimeout = parseDuration(value);\n          break;\n        case 'sample_rate': {\n          const rate = parseFloat(value);\n          if (!isNaN(rate) && rate >= 0 && rate <= 1) {\n            this.config.sampling = { ...this.config.sampling, rate };\n          }\n          break;\n        }\n        case 'sensitive_fields':\n          this.config.sensitiveFields = value.split(',').map(s => s.trim().toLowerCase());\n          break;\n        case 'sensitive_headers':\n          this.config.sensitiveHeaders = value.split(',').map(s => s.trim().toLowerCase());\n          break;\n        case 'verbose':\n          this.config.verbose = value === 'true' || value === '1';\n          break;\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Build the final configuration by merging with defaults\n   * Validates the configuration before returning\n   */\n  build(): BodyLoggingConfig {\n    const finalConfig: BodyLoggingConfig = {\n      ...DEFAULT_BODY_LOGGING_CONFIG,\n      ...this.config,\n      // Merge nested objects properly\n      contentTypeFilter: {\n        ...DEFAULT_BODY_LOGGING_CONFIG.contentTypeFilter,\n        ...this.config.contentTypeFilter,\n        exclude: [\n          ...(DEFAULT_BODY_LOGGING_CONFIG.contentTypeFilter.exclude ?? []),\n          ...(this.config.contentTypeFilter?.exclude ?? []),\n        ],\n        include: [\n          ...(DEFAULT_BODY_LOGGING_CONFIG.contentTypeFilter.include ?? []),\n          ...(this.config.contentTypeFilter?.include ?? []),\n        ],\n      },\n      redactionPatterns: [\n        ...(DEFAULT_BODY_LOGGING_CONFIG.redactionPatterns ?? []),\n        ...(this.config.redactionPatterns ?? []),\n      ],\n      sensitiveFields: [\n        ...(DEFAULT_BODY_LOGGING_CONFIG.sensitiveFields ?? []),\n        ...(this.config.sensitiveFields ?? []),\n      ],\n      sensitiveHeaders: [\n        ...(DEFAULT_BODY_LOGGING_CONFIG.sensitiveHeaders ?? []),\n        ...(this.config.sensitiveHeaders ?? []),\n      ],\n      skipStatusCodes: [\n        ...(DEFAULT_BODY_LOGGING_CONFIG.skipStatusCodes ?? []),\n        ...(this.config.skipStatusCodes ?? []),\n      ],\n      maxDepth: this.config.maxDepth ?? DEFAULT_BODY_LOGGING_CONFIG.maxDepth,\n      sampling:\n        this.config.sampling !== undefined\n          ? {\n              ...DEFAULT_BODY_LOGGING_CONFIG.sampling,\n              ...this.config.sampling,\n            }\n          : DEFAULT_BODY_LOGGING_CONFIG.sampling,\n    };\n\n    // Validate configuration\n    this.validate(finalConfig);\n\n    return finalConfig;\n  }\n\n  /**\n   * Validate the configuration\n   */\n  private validate(config: BodyLoggingConfig): void {\n    if (config.maxSize < 0) {\n      throw new Error('maxSize must be non-negative');\n    }\n\n    if (config.maxSize > 100 * 1024 * 1024) {\n      throw new Error('maxSize cannot exceed 100MB');\n    }\n\n    if (config.readTimeout < 0) {\n      throw new Error('readTimeout must be non-negative');\n    }\n\n    if (config.sampling && (config.sampling.rate < 0 || config.sampling.rate > 1)) {\n      throw new Error('sampling rate must be between 0 and 1');\n    }\n\n    if (config.maxDepth !== undefined && (config.maxDepth < 1 || config.maxDepth > 100)) {\n      throw new Error('maxDepth must be between 1 and 100');\n    }\n  }\n}\n\n/**\n * Factory function to create a new ApiLoggerBuilder\n */\nexport function createBodyLoggingConfig(): ApiLoggerBuilder {\n  return new ApiLoggerBuilder();\n}\n\n// ============================================================================\n// Core Implementation\n// ============================================================================\n\n/**\n * Check if content type is binary (should not log body)\n */\nexport function isBinaryContentType(contentType: string): boolean {\n  const normalized = contentType.toLowerCase();\n  const binaryPatterns = DEFAULT_BODY_LOGGING_CONFIG.contentTypeFilter.exclude ?? [];\n  return binaryPatterns.some(pattern => {\n    if (pattern.includes('*')) {\n      const regex = new RegExp('^' + pattern.replace(/\\*/g, '.*') + '$');\n      return regex.test(normalized);\n    }\n    return normalized.includes(pattern);\n  });\n}\n\n/**\n * Get response body type based on content-type header\n */\nexport function getBodyType(contentType: string): 'json' | 'text' | null {\n  const normalized = contentType.toLowerCase();\n\n  if (\n    normalized.includes('json') ||\n    normalized.includes('application/xml') ||\n    normalized.includes('text/')\n  ) {\n    return normalized.includes('json') ? 'json' : 'text';\n  }\n\n  if (isBinaryContentType(normalized)) {\n    return null;\n  }\n\n  return 'text';\n}\n\n/**\n * Match content type against pattern (supports wildcards)\n */\nfunction matchContentType(contentType: string, pattern: string): boolean {\n  const normalizedPattern = pattern.toLowerCase();\n  const normalized = contentType.toLowerCase();\n\n  // Exact match\n  if (normalizedPattern === normalized) {\n    return true;\n  }\n\n  // Wildcard match\n  if (normalizedPattern.includes('*')) {\n    const regex = new RegExp('^' + normalizedPattern.replace(/\\*/g, '.*') + '$');\n    return regex.test(normalized);\n  }\n\n  // Prefix match\n  return normalized.startsWith(normalizedPattern);\n}\n\n/**\n * Check if content type is allowed based on filter configuration\n */\nfunction isContentTypeAllowed(contentType: string, filter: ContentTypeFilter): boolean {\n  const normalized = contentType.toLowerCase();\n\n  // Check exclude patterns first\n  for (const pattern of filter.exclude ?? []) {\n    if (matchContentType(normalized, pattern)) {\n      return false;\n    }\n  }\n\n  // Check include patterns\n  if (filter.include && filter.include.length > 0) {\n    for (const pattern of filter.include) {\n      if (matchContentType(normalized, pattern)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Determine if request should be logged based on sampling config\n * Returns true if request SHOULD be logged (sampled), false to skip\n */\nfunction shouldSample(url: string, sampling: SamplingConfig): boolean {\n  // If no patterns specified, apply sampling rate to all requests\n  if (!sampling.patterns || sampling.patterns.length === 0) {\n    return Math.random() < sampling.rate;\n  }\n\n  // Check if URL matches any pattern\n  const matchesPattern = sampling.patterns.some(pattern => {\n    if (pattern.includes('*')) {\n      const regex = new RegExp('^' + pattern.replace(/\\*/g, '.*') + '$');\n      return regex.test(url);\n    }\n    return url.includes(pattern);\n  });\n\n  // Only sample if URL matches pattern AND passes rate check\n  return matchesPattern && Math.random() < sampling.rate;\n}\n\n/**\n * Apply all redaction patterns and field-based redaction to body\n * Handles circular references using WeakSet and depth limiting to prevent stack overflow\n */\nfunction applyRedaction(\n  body: unknown,\n  config: BodyLoggingConfig,\n  visited?: WeakSet<object>,\n  depth = 0\n): unknown {\n  const maxDepth = config.maxDepth ?? 10;\n\n  // Check depth limit before processing\n  if (depth > maxDepth) {\n    return '[MAX_DEPTH_EXCEEDED]';\n  }\n\n  if (!body || typeof body !== 'object') {\n    return body;\n  }\n\n  // Initialize visited set for circular reference detection\n  if (!visited) {\n    visited = new WeakSet();\n  }\n\n  // Check for circular reference\n  if (visited.has(body)) {\n    return '[REDACTED-CIRCULAR]';\n  }\n  visited.add(body);\n\n  // Handle arrays\n  if (Array.isArray(body)) {\n    return body.map(item => applyRedaction(item, config, visited, depth));\n  }\n\n  // Handle special object types (Date, RegExp, etc.)\n  if (body instanceof Date) {\n    return body.toISOString();\n  }\n  if (body instanceof RegExp) {\n    return body.source;\n  }\n\n  const redacted: Record<string, unknown> = {};\n\n  for (const [key, value] of Object.entries(body as Record<string, unknown>)) {\n    const normalizedKey = key.toLowerCase();\n\n    // Check if field is in sensitive fields list\n    if (config.sensitiveFields.some(field => normalizedKey === field.toLowerCase())) {\n      redacted[key] = '[REDACTED]';\n      continue;\n    }\n\n    // Apply redaction patterns if field name matches\n    let redactedValue = value;\n    for (const pattern of config.redactionPatterns) {\n      if (!pattern.fieldNames || pattern.fieldNames.some(f => normalizedKey === f.toLowerCase())) {\n        if (typeof value === 'string') {\n          redactedValue = value.replace(pattern.pattern, pattern.replacement);\n        }\n      }\n    }\n\n    // Recursively process nested objects with depth tracking\n    if (typeof redactedValue === 'object' && redactedValue !== null) {\n      redacted[key] = applyRedaction(redactedValue, config, visited, depth + 1);\n    } else {\n      redacted[key] = redactedValue;\n    }\n  }\n\n  return redacted;\n}\n\n/**\n * Read body with timeout using the provided config for maxSize\n */\nasync function readBodyWithTimeout(\n  response: Response,\n  timeout: number,\n  maxSize: number\n): Promise<{ body: unknown; truncated: boolean } | null> {\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n  try {\n    const contentType = response.headers.get('content-type') || '';\n\n    let body: unknown;\n    let truncated = false;\n\n    if (contentType.includes('json')) {\n      body = await response.json();\n    } else {\n      const text = await response.text();\n\n      // Check size after reading using the provided maxSize\n      if (text.length > maxSize) {\n        body = `${text.slice(0, maxSize)}... [truncated]`;\n        truncated = true;\n      } else {\n        body = text;\n      }\n    }\n\n    clearTimeout(timeoutId);\n    return { body, truncated };\n  } catch (error) {\n    clearTimeout(timeoutId);\n    if ((error as Error).name === 'AbortError') {\n      return null;\n    }\n    throw error;\n  }\n}\n\n/**\n * Safely parse response body for logging with configurable options\n */\nasync function parseResponseBodyForLog(\n  response: Response,\n  config: BodyLoggingConfig,\n  url?: string\n): Promise<{ body: unknown; truncated: boolean } | null> {\n  // Check if body logging is disabled\n  if (!config.enabled) {\n    if (config.verbose) {\n      console.debug('[BodyLogging] Body logging disabled');\n    }\n    return null;\n  }\n\n  // Check for no-content responses\n  if (config.skipStatusCodes.includes(response.status)) {\n    return null;\n  }\n\n  // Skip if body is null/undefined (HEAD requests, etc.)\n  if (!response.body) {\n    return null;\n  }\n\n  const contentType = response.headers.get('content-type') || '';\n\n  // Check content type filter\n  if (!isContentTypeAllowed(contentType, config.contentTypeFilter)) {\n    return null;\n  }\n\n  // Check Content-Length header before cloning to avoid memory issues\n  const contentLength = response.headers.get('content-length');\n  if (contentLength) {\n    const size = parseInt(contentLength, 10);\n    if (!isNaN(size) && size > config.maxSize * 2) {\n      return null;\n    }\n  }\n\n  // Check sampling\n  if (config.sampling && url && !shouldSample(url, config.sampling)) {\n    return null;\n  }\n\n  try {\n    // Clone response with timeout\n    const cloned = response.clone();\n    const bodyResult = await readBodyWithTimeout(cloned, config.readTimeout, config.maxSize);\n\n    if (!bodyResult) {\n      return null;\n    }\n\n    const { body, truncated } = bodyResult;\n\n    // Apply redaction\n    const redactedBody = applyRedaction(body, config);\n\n    return { body: redactedBody, truncated };\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Redact sensitive data from headers based on config\n */\nfunction redactHeadersWithConfig(\n  headers: Record<string, string>,\n  config: BodyLoggingConfig\n): Record<string, string> | undefined {\n  if (!headers) {\n    return undefined;\n  }\n\n  const redacted: Record<string, string> = {};\n\n  for (const [key, value] of Object.entries(headers)) {\n    const normalizedKey = key.toLowerCase();\n    if (config.sensitiveHeaders.some(h => normalizedKey === h.toLowerCase())) {\n      redacted[key] = '[REDACTED]';\n    } else {\n      redacted[key] = value;\n    }\n  }\n\n  return redacted;\n}\n\n/**\n * Redact sensitive data from body based on config\n */\nfunction redactBodyWithConfig(body: unknown, config: BodyLoggingConfig): unknown {\n  return applyRedaction(body, config);\n}\n\n/**\n * Redact sensitive data from headers (legacy function for backward compatibility)\n */\nfunction redactHeaders(\n  headers: Record<string, string> | undefined\n): Record<string, string> | undefined {\n  if (!headers) {\n    return undefined;\n  }\n\n  const redacted: Record<string, string> = {};\n\n  for (const [key, value] of Object.entries(headers)) {\n    const normalizedKey = key.toLowerCase();\n    if (DEFAULT_BODY_LOGGING_CONFIG.sensitiveHeaders.includes(normalizedKey)) {\n      redacted[key] = '[REDACTED]';\n    } else {\n      redacted[key] = value;\n    }\n  }\n\n  return redacted;\n}\n\n/**\n * Redact sensitive data from body (legacy function for backward compatibility)\n */\nfunction redactBody(body: unknown): unknown {\n  return applyRedaction(body, DEFAULT_BODY_LOGGING_CONFIG);\n}\n\n// ============================================================================\n// API Logger Implementation\n// ============================================================================\n\n/**\n * API Logger implementation\n */\nclass ApiLoggerImpl implements IApiLogger {\n  private logger: IServerLogger;\n\n  constructor(options?: { name?: string }) {\n    this.logger = createServerLogger({\n      name: options?.name || 'api-logger',\n    });\n  }\n\n  logRequest(context: ApiRequestContext): void {\n    this.logger.info('API Request', {\n      type: 'request',\n      requestId: context.requestId,\n      method: context.method,\n      url: context.url,\n      headers: context.headers,\n      timestamp: context.timestamp,\n    });\n  }\n\n  logResponse(context: ApiResponseContext): void {\n    this.logger.info('API Response', {\n      type: 'response',\n      requestId: context.requestId,\n      method: context.method,\n      url: context.url,\n      statusCode: context.statusCode,\n      duration: context.duration,\n      timestamp: context.timestamp,\n      ...(context.body !== undefined && { responseBody: context.body as object }),\n    });\n  }\n\n  logError(error: Error, context?: LogContext): void {\n    this.logger.error('API Error', {\n      type: 'error',\n      error: {\n        message: error.message,\n        name: error.name,\n        stack: error.stack,\n      },\n      ...context,\n    });\n  }\n}\n\n// ============================================================================\n// Public API\n// ============================================================================\n\n/**\n * Create API logger instance\n */\nexport function createApiLogger(options?: { name?: string }): IApiLogger {\n  return new ApiLoggerImpl(options);\n}\n\n/**\n * Create a logged fetch function with automatic request/response logging\n * Supports BodyLoggingConfig via builder pattern\n */\nexport function createLoggedFetch(\n  options?: LoggedFetchOptions\n): (input: RequestInfo | URL, init?: RequestInit) => Promise<Response> {\n  const logger = options?.logger ?? createApiLogger({ name: 'fetch-logger' });\n  const enabled = options?.enabled ?? true;\n\n  // Build body logging config from options or defaults\n  let bodyConfig: BodyLoggingConfig;\n\n  if (options?.bodyLoggingConfig) {\n    // Use provided config directly\n    bodyConfig = options.bodyLoggingConfig;\n  } else if (\n    process.env.LOG_BODY_ENABLED !== undefined ||\n    process.env.LOG_BODY_MAX_SIZE !== undefined\n  ) {\n    // Load from environment if any env var is set\n    bodyConfig = new ApiLoggerBuilder().fromEnv().build();\n  } else {\n    // Use default config\n    bodyConfig = DEFAULT_BODY_LOGGING_CONFIG;\n  }\n\n  return async function loggedFetch(\n    input: RequestInfo | URL,\n    init?: RequestInit\n  ): Promise<Response> {\n    if (!enabled) {\n      return fetch(input, init);\n    }\n\n    const url =\n      typeof input === 'string' ? input : input instanceof Request ? input.url : input.toString();\n    const requestId = generateRequestId();\n    const startTime = getPerformanceNow();\n\n    // Redact headers based on config\n    const redactHeadersValue = options?.redactHeaders !== false;\n    const headers = redactHeadersValue\n      ? redactHeadersWithConfig((init?.headers as Record<string, string>) ?? {}, bodyConfig)\n      : ((init?.headers as Record<string, string>) ?? {});\n\n    const requestContext: ApiRequestContext = {\n      requestId,\n      method: init?.method ?? 'GET',\n      url,\n      headers,\n      body: redactBodyWithConfig(init?.body, bodyConfig),\n      timestamp: createTimestamp(),\n    };\n\n    logger.logRequest(requestContext);\n\n    try {\n      const response = await fetch(input, {\n        ...init,\n        headers: {\n          ...(init?.headers ?? {}),\n          'X-Request-ID': requestId,\n        },\n      });\n      const duration = getPerformanceNow() - startTime;\n\n      // Parse response body with config\n      const parsedBody = await parseResponseBodyForLog(response, bodyConfig, url);\n\n      const responseContext: ApiResponseContext = {\n        requestId,\n        method: requestContext.method,\n        url: requestContext.url,\n        statusCode: response.status,\n        duration,\n        timestamp: createTimestamp(),\n        body: parsedBody ? parsedBody.body : undefined,\n      };\n\n      logger.logResponse(responseContext);\n\n      return response;\n    } catch (error) {\n      const duration = getPerformanceNow() - startTime;\n\n      logger.logError(error as Error, {\n        requestId,\n        method: requestContext.method,\n        url: requestContext.url,\n        duration,\n      });\n\n      throw error;\n    }\n  };\n}\n\n/**\n * Create fetch interceptors for manual integration\n */\nexport function createFetchInterceptor(options?: { logger?: IApiLogger; enabled?: boolean }): {\n  request: InterceptorFunction;\n  response: InterceptorFunction;\n  error: InterceptorFunction;\n} {\n  const logger = options?.logger ?? createApiLogger({ name: 'interceptor' });\n  const enabled = options?.enabled ?? true;\n\n  const request: InterceptorFunction = async (url: string, options?: RequestInit) => {\n    if (!enabled) {\n      return { url, options };\n    }\n\n    const requestId = generateRequestId();\n\n    logger.logRequest({\n      requestId,\n      method: options?.method ?? 'GET',\n      url,\n      headers: redactHeaders((options?.headers as Record<string, string>) ?? {}),\n      body: redactBody(options?.body),\n      timestamp: createTimestamp(),\n    });\n\n    return {\n      url,\n      options: {\n        ...options,\n        headers: {\n          ...(options?.headers ?? {}),\n          'X-Request-ID': requestId,\n        },\n      },\n    };\n  };\n\n  const response: InterceptorFunction = async (url: string, options?: RequestInit) => {\n    if (!enabled) {\n      return { url, options };\n    }\n\n    const requestId = (options?.headers as Record<string, string>)?.['X-Request-ID'];\n\n    if (requestId) {\n      logger.logResponse({\n        requestId,\n        method: options?.method ?? 'GET',\n        url,\n        timestamp: createTimestamp(),\n      } as ApiResponseContext);\n    }\n\n    return { url, options };\n  };\n\n  const error: InterceptorFunction = async (url: string, options?: RequestInit) => {\n    if (!enabled) {\n      return { url, options };\n    }\n\n    const requestId = (options?.headers as Record<string, string>)?.['X-Request-ID'];\n\n    if (requestId) {\n      logger.logError(new Error('Fetch failed'), {\n        requestId,\n        method: options?.method ?? 'GET',\n        url,\n      });\n    }\n\n    return { url, options };\n  };\n\n  return { request, response, error };\n}\n\n/**\n * Time an async API call with automatic logging\n */\nexport async function timeApiCall<T>(\n  operation: string,\n  fn: () => Promise<T>,\n  logger?: IServerLogger,\n  context?: LogContext\n): Promise<T> {\n  const log = logger ?? createServerLogger({ name: 'perf' });\n  const startTime = getPerformanceNow();\n\n  log.info(`${operation} started`, context);\n\n  try {\n    const result = await fn();\n    const duration = getPerformanceNow() - startTime;\n\n    log.info(`${operation} completed`, {\n      ...context,\n      duration,\n    });\n\n    return result;\n  } catch (error) {\n    const duration = getPerformanceNow() - startTime;\n\n    log.error(`${operation} failed`, {\n      ...context,\n      duration,\n      error: {\n        message: (error as Error).message,\n        name: (error as Error).name,\n      },\n    });\n\n    throw error;\n  }\n}\n\n// ============================================================================\n// Exports\n// ============================================================================\n\nexport default createApiLogger;\nexport { ApiLoggerImpl, DEFAULT_BODY_LOGGING_CONFIG, redactHeaders, redactBody, applyRedaction };\n","/**\n * MIT License\n *\n * Copyright (c) 2026 Zaob <zaob.ogn@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/**\n * Browser-safe Logger Implementation\n *\n * Feature: 011-api-logger\n * User Story 1: Browser-Safe Client Logging\n *\n * This module provides a browser-safe logger that:\n * - Works in both CSR and SSR contexts\n * - Does NOT bundle Winston (pure browser code)\n * - Outputs to console with colored formatting in dev\n * - Persists logs to localStorage with quota management\n */\n\nimport { shouldLog, isLoggingEnabled, getConfig } from './config';\nimport { formatForConsole, formatForJson, formatBrowserLogEntry } from './formatters';\nimport type { IBrowserLogger, LogContext, LogLevel, BrowserLogEntry, StoredLogs } from './types';\nimport { generateUUID, createUnixTimestamp, isBrowser } from './utils';\n\n/**\n * Storage key for localStorage\n */\nconst STORAGE_KEY = 'glean_api_logs';\n\n/**\n * Maximum number of entries to store\n */\nconst MAX_ENTRIES = 100;\n\n/**\n * Default options for the browser logger\n */\ninterface BrowserLoggerOptions {\n  /** Maximum number of entries to store */\n  maxEntries?: number;\n  /** Custom storage key */\n  storageKey?: string;\n  /** Enable console output */\n  consoleEnabled?: boolean;\n  /** Enable localStorage persistence */\n  persistenceEnabled?: boolean;\n}\n\n/**\n * Browser logger implementation\n */\nclass BrowserLoggerImpl implements IBrowserLogger {\n  private options: Required<BrowserLoggerOptions>;\n  private config = getConfig();\n\n  constructor(options: BrowserLoggerOptions = {}) {\n    this.options = {\n      maxEntries: options.maxEntries ?? MAX_ENTRIES,\n      storageKey: options.storageKey ?? STORAGE_KEY,\n      consoleEnabled: options.consoleEnabled ?? true,\n      persistenceEnabled: options.persistenceEnabled ?? true,\n    };\n  }\n\n  /**\n   * Log a message at the specified level\n   */\n  private log(level: LogLevel, message: string, context?: LogContext): void {\n    if (!isLoggingEnabled()) {\n      return;\n    }\n\n    if (!shouldLog(level)) {\n      return;\n    }\n\n    const entry = formatBrowserLogEntry(level, message, context);\n    const timestamp = createUnixTimestamp();\n\n    // Console output\n    if (this.options.consoleEnabled) {\n      const formatted = formatForConsole(level, message, context, timestamp);\n      console.log(formatted);\n    }\n\n    // LocalStorage persistence\n    if (this.options.persistenceEnabled && isBrowser()) {\n      this.persistEntry(entry, timestamp);\n    }\n  }\n\n  /**\n   * Persist an entry to localStorage\n   */\n  private persistEntry(entry: Omit<BrowserLogEntry, 'id' | 'timestamp'>, timestamp: number): void {\n    if (!isBrowser()) {\n      return;\n    }\n\n    try {\n      const stored = this.getStoredLogsRaw();\n\n      const newEntry: BrowserLogEntry = {\n        ...entry,\n        id: generateUUID(),\n        timestamp,\n      };\n\n      stored.entries.push(newEntry);\n\n      while (stored.entries.length > this.options.maxEntries) {\n        stored.entries.shift();\n      }\n\n      stored.lastUpdated = timestamp;\n\n      localStorage.setItem(this.options.storageKey, JSON.stringify(stored));\n    } catch {\n      console.warn('[BrowserLogger] localStorage unavailable or quota exceeded');\n    }\n  }\n\n  /**\n   * Get raw stored logs from localStorage\n   */\n  private getStoredLogsRaw(): StoredLogs {\n    if (!isBrowser()) {\n      return { entries: [], lastUpdated: 0, version: 1 };\n    }\n\n    try {\n      const stored = localStorage.getItem(this.options.storageKey);\n      if (!stored) {\n        return { entries: [], lastUpdated: 0, version: 1 };\n      }\n\n      const parsed = JSON.parse(stored);\n      return {\n        entries: Array.isArray(parsed.entries) ? parsed.entries : [],\n        lastUpdated: parsed.lastUpdated || 0,\n        version: parsed.version || 1,\n      };\n    } catch {\n      return { entries: [], lastUpdated: 0, version: 1 };\n    }\n  }\n\n  debug(message: string, context?: LogContext): void {\n    this.log('debug', message, context);\n  }\n\n  info(message: string, context?: LogContext): void {\n    this.log('info', message, context);\n  }\n\n  warn(message: string, context?: LogContext): void {\n    this.log('warn', message, context);\n  }\n\n  error(message: string, context?: LogContext): void {\n    this.log('error', message, context);\n  }\n\n  getStoredLogs(): BrowserLogEntry[] {\n    const stored = this.getStoredLogsRaw();\n    return [...stored.entries].sort((a, b) => a.timestamp - b.timestamp);\n  }\n\n  clearStoredLogs(): void {\n    if (!isBrowser()) {\n      return;\n    }\n\n    try {\n      localStorage.removeItem(this.options.storageKey);\n    } catch {\n      console.warn('[BrowserLogger] Failed to clear stored logs');\n    }\n  }\n\n  async flush(): Promise<void> {\n    console.log('[BrowserLogger] flush() called - server sync not yet implemented');\n  }\n}\n\n/**\n * Singleton instance of the browser logger\n */\nlet instance: BrowserLoggerImpl | null = null;\n\n/**\n * Get or create the browser logger singleton\n */\nfunction getInstance(): BrowserLoggerImpl {\n  if (!instance) {\n    instance = new BrowserLoggerImpl();\n  }\n  return instance;\n}\n\n/**\n * Default export - singleton browser logger instance\n */\nconst browserLogger: IBrowserLogger = getInstance();\n\n/**\n * Factory function to create a new browser logger instance\n */\nfunction createBrowserLogger(options?: BrowserLoggerOptions): IBrowserLogger {\n  return new BrowserLoggerImpl(options);\n}\n\nexport default browserLogger;\nexport { browserLogger, createBrowserLogger, BrowserLoggerImpl };\n","/**\n * MIT License\n *\n * Copyright (c) 2026 Zaob <zaob.ogn@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/**\n * Log formatters for API Logger Integration\n *\n * Provides formatting functions for console output (colored in dev, structured in prod)\n * and JSON output (Datadog/CloudWatch compatible).\n */\n\nimport { isDevelopment, getConfig } from './config';\nimport type { LogContext, LogLevel, BrowserLogEntry } from './types';\n\n/**\n * Colors for console output (ANSI escape codes)\n */\nconst COLORS: Record<LogLevel, string> = {\n  debug: '\\x1b[90m', // gray\n  info: '\\x1b[32m', // green\n  warn: '\\x1b[33m', // yellow\n  error: '\\x1b[31m', // red\n  fatal: '\\x1b[35m', // magenta\n};\n\nconst RESET = '\\x1b[0m';\n\n/**\n * Format a timestamp to ISO 8601 format\n */\nexport function formatTimestamp(timestamp?: number | string): string {\n  const date = timestamp ? new Date(timestamp) : new Date();\n  return date.toISOString();\n}\n\n/**\n * Format log level for console output (with color)\n */\nexport function formatLevel(level: LogLevel): string {\n  const color = COLORS[level] || COLORS.info;\n  return `${color}${level.toUpperCase().padEnd(5)}${RESET}`;\n}\n\n/**\n * Format log level for JSON output\n */\nexport function formatLevelJson(level: LogLevel): string {\n  return level.toUpperCase();\n}\n\n/**\n * Format the message for console output\n */\nexport function formatMessage(message: string, context?: LogContext): string {\n  if (!context || Object.keys(context).length === 0) {\n    return message;\n  }\n\n  const contextStr = Object.entries(context)\n    .map(([key, value]) => {\n      const formattedValue = typeof value === 'object' ? JSON.stringify(value) : String(value);\n      return ` ${key}=${formattedValue}`;\n    })\n    .join('');\n\n  return `${message}${contextStr}`;\n}\n\n/**\n * Format error object with stack trace\n */\nexport function formatError(error: Error | unknown): object {\n  if (!(error instanceof Error)) {\n    return { error: String(error) };\n  }\n\n  return {\n    message: error.message,\n    name: error.name,\n    stack: error.stack,\n  };\n}\n\n/**\n * Create a formatted log entry for console output (development mode)\n */\nexport function formatForConsole(\n  level: LogLevel,\n  message: string,\n  context?: LogContext,\n  timestamp?: number | string\n): string {\n  const formattedTimestamp = formatTimestamp(timestamp);\n  const formattedLevel = formatLevel(level);\n  const formattedMessage = formatMessage(message, context);\n\n  return `[${formattedTimestamp}] ${formattedLevel} ${formattedMessage}`;\n}\n\n/**\n * Create a structured log entry for JSON output (production mode)\n */\nexport interface JsonLogEntry {\n  '@timestamp': string;\n  level: string;\n  message: string;\n  context?: LogContext;\n  logger?: string;\n  service?: string;\n  trace?: string;\n  error?: object;\n}\n\n/**\n * Create a JSON log entry compatible with Datadog, CloudWatch, and ELK\n */\nexport function formatForJson(\n  level: LogLevel,\n  message: string,\n  context?: LogContext,\n  timestamp?: number | string,\n  logger?: string,\n  service?: string,\n  trace?: string,\n  error?: Error | unknown\n): JsonLogEntry {\n  const entry: JsonLogEntry = {\n    '@timestamp': formatTimestamp(timestamp),\n    level: formatLevelJson(level),\n    message,\n  };\n\n  if (context && Object.keys(context).length > 0) {\n    entry.context = context;\n  }\n\n  if (logger) {\n    entry.logger = logger;\n  }\n\n  if (service) {\n    entry.service = service;\n  }\n\n  if (trace) {\n    entry.trace = trace;\n  }\n\n  if (error) {\n    entry.error = formatError(error);\n  }\n\n  return entry;\n}\n\n/**\n * Format a log entry based on environment (dev = console, prod = JSON)\n */\nexport function formatLogEntry(\n  level: LogLevel,\n  message: string,\n  context?: LogContext,\n  timestamp?: number | string,\n  logger?: string,\n  service?: string,\n  trace?: string,\n  error?: Error | unknown\n): string {\n  const config = getConfig();\n\n  if (isDevelopment() && config.developmentFormat) {\n    return formatForConsole(level, message, context, timestamp);\n  }\n\n  const jsonEntry = formatForJson(\n    level,\n    message,\n    context,\n    timestamp,\n    logger,\n    service,\n    trace,\n    error\n  );\n\n  return JSON.stringify(jsonEntry);\n}\n\n/**\n * Format a browser log entry for localStorage\n */\nexport function formatBrowserLogEntry(\n  level: LogLevel,\n  message: string,\n  context?: LogContext\n): Omit<BrowserLogEntry, 'id' | 'timestamp'> {\n  return {\n    level,\n    message,\n    context,\n  };\n}\n\n/**\n * Format duration in human-readable format\n */\nexport function formatDuration(ms: number): string {\n  if (ms < 1) {\n    return `${(ms * 1000).toFixed(0)}s`;\n  }\n  if (ms < 1000) {\n    return `${ms.toFixed(0)}ms`;\n  }\n  if (ms < 60000) {\n    return `${(ms / 1000).toFixed(2)}s`;\n  }\n  return `${(ms / 60000).toFixed(2)}m`;\n}\n\n/**\n * Truncate a string to a maximum length\n */\nexport function truncate(str: string, maxLength: number): string {\n  if (str.length <= maxLength) {\n    return str;\n  }\n  return `${str.slice(0, maxLength)}...`;\n}\n\n/**\n * Safely stringify an object for logging\n */\nexport function safeStringify(obj: unknown, maxLength: number = 10240): string {\n  try {\n    const str = JSON.stringify(obj);\n    return truncate(str, maxLength);\n  } catch {\n    return '[Unable to stringify]';\n  }\n}\n","/**\n * MIT License\n *\n * Copyright (c) 2026 Zaob <zaob.ogn@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/**\n * Unified Logger API\n *\n * Feature: 011-api-logger\n *\n * Single entry point for all logging needs.\n * Auto-detects environment and uses appropriate logger.\n *\n * @example\n * ```typescript\n * import { logger } from '@/lib/logger';\n *\n * // In client component OR server component - same API!\n * const log = logger({ name: 'my-module' });\n * log.info('Hello from', { userId: 123 });\n * log.error('Something went wrong', { error: 'timeout' });\n * ```\n */\n\nimport { browserLogger, createBrowserLogger } from './browser';\nimport { perf } from './timing';\nimport type { LogContext, LogLevel, IBrowserLogger, IServerLogger } from './types';\nexport { perf as performance } from './timing';\n\nlet _serverLogger: IServerLogger | null = null;\n\n/**\n * Create a logger instance\n * - In browser: returns browser logger (console + localStorage)\n * - In server: returns Winston logger (file rotation with daily logs)\n *\n * @param options - Logger configuration\n * @returns Logger instance\n *\n * @example\n * ```typescript\n * import { logger } from '@/lib/logger';\n *\n * // Simple usage\n * const log = logger();\n * log.info('Hello');\n *\n * // With options\n * const apiLog = logger({ name: 'api', level: 'debug' });\n * apiLog.info('API request', { endpoint: '/users' });\n * ```\n */\nexport function logger(options?: {\n  name?: string;\n  level?: LogLevel;\n}): IBrowserLogger | IServerLogger {\n  if (typeof window !== 'undefined') {\n    // Browser environment\n    return createBrowserLogger({\n      consoleEnabled: true,\n      persistenceEnabled: true,\n      maxEntries: 100,\n      storageKey: 'glean_api_logs',\n    });\n  }\n\n  // Server environment - use Winston\n  // Lazy load to prevent bundling Winston in client\n  if (!_serverLogger) {\n    const { createServerLogger } = require('./server');\n    _serverLogger = createServerLogger({\n      name: options?.name ?? 'server',\n      level: options?.level,\n    });\n  }\n\n  return _serverLogger!;\n}\n\n/**\n * Create a child logger with persistent context\n * Only available in server environment (Winston feature)\n *\n * @param context - Context to attach to all subsequent logs\n * @returns Child logger instance\n *\n * @example\n * ```typescript\n * import { child } from '@/lib/logger';\n *\n * const apiLog = child({ module: 'api', version: '1.0' });\n * apiLog.info('Request received'); // Logs with module, version context\n * ```\n */\nexport function child(context: LogContext): IServerLogger | null {\n  if (typeof window !== 'undefined') {\n    // Browser doesn't support child loggers\n    return null;\n  }\n\n  const { createServerLogger } = require('./server');\n  const parent = createServerLogger({ name: 'parent' });\n  return parent.child(context);\n}\n\n/**\n * Create a logged fetch wrapper for API calls\n * Automatically logs request/response with timing and redaction\n *\n * @param options - Configuration options\n * @returns Wrapped fetch function\n *\n * @example\n * ```typescript\n * import { loggedFetch } from '@/lib/logger';\n *\n * const fetch = loggedFetch();\n * const response = await fetch('/api/users');\n * // Automatically logs: request, response, duration, status\n * ```\n */\nexport function loggedFetch(options?: {\n  enabled?: boolean;\n  redactHeaders?: boolean;\n  redactBody?: boolean;\n}): (input: RequestInfo | URL, init?: RequestInit) => Promise<Response> {\n  // Dynamic import to avoid bundling server code\n  if (typeof window !== 'undefined') {\n    // Browser doesn't support this - return no-op\n    return () => Promise.reject(new Error('loggedFetch is server-only'));\n  }\n\n  const { createLoggedFetch: _createLoggedFetch } = require('./http');\n  return _createLoggedFetch(options);\n}\n\n/**\n * Time an async operation and return result with duration\n * Works in both browser and server environments\n *\n * @param label - Operation name for logging\n * @param fn - Async function to time\n * @returns Promise resolving with result and duration in milliseconds\n *\n * @example\n * ```typescript\n * import { measure } from '@/lib/logger';\n *\n * const { result, duration } = await measure('fetch-users', async () => {\n *   return await fetch('/api/users');\n * });\n * console.log(`Completed in ${duration}ms`);\n * ```\n */\nexport async function measure<T>(\n  label: string,\n  fn: () => Promise<T>\n): Promise<{ result: T; duration: number }> {\n  if (typeof window !== 'undefined') {\n    // Browser fallback - no Winston\n    const start = performance.now();\n    const result = await fn();\n    const duration = performance.now() - start;\n    console.log(`${label}: ${duration.toFixed(2)}ms`);\n    return { result, duration };\n  }\n\n  const timing = await import('./timing');\n  const result = await timing.timeAsync(fn);\n  return { result: result.result, duration: result.duration };\n}\n\n// ============================================================================\n// HTTP Body Logging Configuration\n// ============================================================================\n\n/**\n * Builder class for configuring HTTP body logging\n * Provides a fluent API for setting up request/response logging with:\n * - Content-Type filtering\n * - Size limits and truncation\n * - Sensitive data redaction\n * - Sampling for high-traffic endpoints\n *\n * @example\n * ```typescript\n * import { ApiLoggerBuilder } from '@zaob/glean-logger';\n *\n * const bodyConfig = new ApiLoggerBuilder()\n *   .enabled(true)\n *   .maxSize('10kb')\n *   .excludeContentTypes('image/*', 'video/*')\n *   .addSensitiveFields('password', 'token')\n *   .build();\n * ```\n */\nexport { ApiLoggerBuilder } from './http';\n\n/**\n * Create a logged fetch function with full body logging configuration\n *\n * @example\n * ```typescript\n * import { createLoggedFetch } from '@zaob/glean-logger';\n *\n * const fetch = createLoggedFetch({\n *   enabled: true,\n *   logger: logger({ name: 'api' }),\n *   bodyLoggingConfig: new ApiLoggerBuilder()\n *     .enabled(true)\n *     .maxSize('10kb')\n *     .addSensitiveFields('password')\n *     .build(),\n * });\n *\n * const response = await fetch('/api/data');\n * // Automatically logs request/response with redaction\n * ```\n */\nexport { createLoggedFetch } from './http';\nexport { createApiLogger } from './http';\nexport type { BodyLoggingConfig } from './types';\n"]}